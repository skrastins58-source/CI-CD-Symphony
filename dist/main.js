(()=>{var e={148:e=>{e.exports={MetricsCollector:class{constructor(){this.apiUrl="/api/metrics"}async fetchLatestMetrics(){try{return{performance:85,coverage:78,bundleSize:156789,timestamp:(new Date).toISOString()}}catch(e){throw console.error("Error fetching metrics:",e),e}}async runAnalysis(){await new Promise(e=>setTimeout(e,2e3));const e=Math.floor(20*Math.random())+80,t=Math.floor(30*Math.random())+70,r=Math.floor(1e5*Math.random())+1e5;return{performance:e,coverage:t,bundleSize:r,timestamp:(new Date).toISOString(),analysis:{performanceBreakdown:{fcp:Math.floor(2e3*Math.random())+1e3,lcp:Math.floor(3e3*Math.random())+2e3,cls:.1*Math.random(),tbt:Math.floor(500*Math.random())+100},coverageDetails:{statements:t+Math.floor(5*Math.random()),branches:t-Math.floor(5*Math.random()),functions:t+Math.floor(3*Math.random()),lines:t},bundleBreakdown:{vendor:Math.floor(.6*r),app:Math.floor(.3*r),assets:Math.floor(.1*r)}}}}async getHistory(){const e=[],t=new Date;for(let r=9;r>=0;r--){const n=new Date(t);n.setDate(n.getDate()-r),e.push({date:n.toISOString().split("T")[0],performance:Math.floor(20*Math.random())+80,coverage:Math.floor(30*Math.random())+70,bundleSize:Math.floor(1e5*Math.random())+1e5})}return e}async getCurrentData(){return{current:await this.fetchLatestMetrics(),history:await this.getHistory(),meta:{generated:(new Date).toISOString(),version:"1.0.0"}}}calculatePerformanceScore(e){let t=100;return e.fcp>1800&&(t-=(e.fcp-1800)/100*.1*100),e.lcp>2500&&(t-=(e.lcp-2500)/100*.25*100),e.cls>.1&&(t-=1e3*(e.cls-.1)*.15*100),e.tbt>200&&(t-=(e.tbt-200)/10*.3*100),Math.max(0,Math.round(t))}analyzeBundleTrends(e){if(e.length<2)return{trend:"insufficient_data"};const t=e.slice(-5),r=e.slice(-10,-5),n=t.reduce((e,t)=>e+t.bundleSize,0)/t.length,o=r.reduce((e,t)=>e+t.bundleSize,0)/r.length,a=(n-o)/o*100;return{trend:a>5?"increasing":a<-5?"decreasing":"stable",change:Math.round(a),recentAverage:Math.round(n),previousAverage:Math.round(o)}}}}},186:(e,t,r)=>{const n="undefined"!=typeof window&&window.MetricsCollector||r(148).MetricsCollector,o="undefined"!=typeof window&&window.Utils||r(948).Utils;class a{constructor(){this.metrics=new n,this.utils=new o,this.initializeApp()}initializeApp(){console.log("🎼 CI/CD Symphony inicializējas..."),this.loadMetrics(),this.setupEventListeners(),this.updateUI()}async loadMetrics(){try{const e=await this.metrics.fetchLatestMetrics();this.updateMetricsDisplay(e)}catch(e){console.error("Kļūda ielādējot metriku:",e),this.showError("Nevarēja ielādēt metriku datus")}}updateMetricsDisplay(e){const t=document.getElementById("performance"),r=document.getElementById("coverage"),n=document.getElementById("bundleSize");t&&(t.textContent=e.performance+"%"),r&&(r.textContent=e.coverage+"%"),n&&(n.textContent=this.utils.formatBytes(e.bundleSize)),this.updateBadges(e)}updateBadges(e){const t=document.getElementById("performanceBadge"),r=document.getElementById("coverageBadge"),n=document.getElementById("bundleBadge");if(t){const r=e.performance>=90?"green":e.performance>=70?"yellow":"red";t.src=`https://img.shields.io/badge/Performance-${e.performance}%25-${r}`}if(r){const t=e.coverage>=80?"green":e.coverage>=60?"yellow":"red";r.src=`https://img.shields.io/badge/Coverage-${e.coverage}%25-${t}`}if(n){const t=Math.round(e.bundleSize/1024),r=t<=100?"green":t<=250?"yellow":"red";n.src=`https://img.shields.io/badge/Bundle-${t}KB-${r}`}}setupEventListeners(){window.runAnalysis=()=>this.runAnalysis(),window.showHistory=()=>this.showHistory(),window.exportData=()=>this.exportData()}async runAnalysis(){console.log("🔄 Palaidz jaunu analīzi...");const e=document.getElementById("results");e&&(e.innerHTML="<p>⏳ Notiek analīze...</p>");try{const e=await this.metrics.runAnalysis();this.displayResults(e)}catch(e){console.error("Analīzes kļūda:",e),this.showError("Analīzes kļūda")}}async showHistory(){console.log("📊 Rāda vēstures datus...");const e=document.getElementById("results");if(e){const t=await this.metrics.getHistory();e.innerHTML=this.formatHistoryTable(t)}}async exportData(){console.log("📥 Eksportē datus...");const e=await this.metrics.getCurrentData();this.utils.downloadJSON(e,"ci-cd-metrics.json")}displayResults(e){const t=document.getElementById("results");if(t){t.innerHTML='\n                <h3>✅ Analīze pabeigta</h3>\n                <pre id="analysis-json"></pre>\n            ';const r=document.getElementById("analysis-json");r&&(r.textContent=JSON.stringify(e,null,2))}this.updateMetricsDisplay(e)}formatHistoryTable(e){if(!e||0===e.length)return"<p>Nav vēstures datu</p>";let t='\n            <h3>📊 Metriku Vēsture</h3>\n            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">\n                <thead>\n                    <tr style="background: rgba(255,255,255,0.2);">\n                        <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">Datums</th>\n                        <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">Performance</th>\n                        <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">Coverage</th>\n                        <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">Bundle Size</th>\n                    </tr>\n                </thead>\n                <tbody>\n        ';return e.forEach(e=>{t+=`\n                <tr>\n                    <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">${e.date}</td>\n                    <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">${e.performance}%</td>\n                    <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">${e.coverage}%</td>\n                    <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.3);">${this.utils.formatBytes(e.bundleSize)}</td>\n                </tr>\n            `}),t+="</tbody></table>",t}showError(e){const t=document.getElementById("results");t&&(t.innerHTML=`<p style="color: #ff6b6b;">❌ ${e}</p>`)}updateUI(){console.log("🎨 UI atjaunots")}}"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",()=>{new a}),e.exports?e.exports=a:window.CICDSymphony=a},948:e=>{e.exports={Utils:class{formatBytes(e,t=2){if(0===e)return"0 Bytes";const r=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}downloadJSON(e,t){const r=JSON.stringify(e,null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(r),o=t||"data.json",a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",o),a.click()}calculatePercentageChange(e,t){return 0===e?t>0?100:0:(t-e)/e*100}getScoreColor(e,t=!1){return t?e<=50?"#4caf50":e<=80?"#ff9800":"#f44336":e>=90?"#4caf50":e>=70?"#ff9800":"#f44336"}debounce(e,t,r){let n;return function(...o){const a=r&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,r||e(...o)},t),a&&e(...o)}}formatDate(e){return new Date(e).toLocaleDateString("lv-LV",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}generateId(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}deepClone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map(e=>this.deepClone(e));if("object"==typeof e){const t={};for(let r in e)e.hasOwnProperty(r)&&(t[r]=this.deepClone(e[r]));return t}}isCI(){return!!(process.env.CI||process.env.CONTINUOUS_INTEGRATION||process.env.BUILD_NUMBER||process.env.GITHUB_ACTIONS||process.env.GITLAB_CI||process.env.CIRCLECI||process.env.TRAVIS)}getEnv(e,t=""){return process.env[e]||t}}}}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(186)})();
//# sourceMappingURL=main.js.map